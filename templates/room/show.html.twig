{% extends 'base.html.twig' %}

{% block title %} Home Refactor | {{ room.Name }} {% endblock %}

{% block body %}
<script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>

<link  rel="stylesheet" href="{{ asset('css/room_privacity_switch.css') }}">
        

    <div class="header">
        {# <img src="{{ absolute_url(asset('images/roof.jpg')) }}" class=""  alt="header"> #}
        <div class="container">
            <div class="home-header">
                <h1> {{ room.Name }} </h1>
            </div>
        </div>
    </div>

    <div class="content container panel panel-body">
        <div class="main-information">            
            {% if room.Image != null %}        
            <div class="form-preview-image">
                <div style="background-image: url('{{ asset(room.Image) }}'); background-size: cover; background-position: center; height: 500px;"></div>
            </div>
            {% endif %}

            {% if owner %}
            <div class="row privacity">
                <div class="col-sm-12">
                <b>Change visibility:  </b>
                </div>
                
                <div class="input-switch">
                    <label for="switchy">Public</label>
                    <input type="checkbox" id="switchy" class="input" 
                    {% if not room.Public %}  
                          checked
                    {% endif %}/>
                    <label for="switchy" class="switch"></label>
                    <label for="switchy">Private</label>
                </div>                
            </div>
            {% endif %}
            <div class="row">
                <div class="measure col-sm-3"><b>Width: </b>{{ ( room.Width/100 )|number_format(2, ',', '.') }} m</div>
                <div class="measure col-sm-3"><b>Height: </b>{{ ( room.Height/100 )|number_format(2, ',', '.') }} m</div>
                <div class="measure col-sm-3"><b>Depth: </b>{{ ( room.Depth/100 )|number_format(2, ',', '.') }} m</div>
            </div>

        </div>

        <div class="elements offset-sm-1 col-sm-10 mb-4">
        </div>

        
        <div class="elements offset-sm-1 col-sm-10 panel" id="item-list" >
        {% for row in room.Items %}
                <a href="{{(row.Link)}}" target="_blank">
                <div class="panel panel-warning item shadow pt-4 pl-4 pr-4 mb-4 bg-white">

                    
                    <div class="panel-heading">
                        {{(row.Name)}}
                    </div>

                    <div class="panel-body row body-item pl-2">      
                        
                            <div class="image col-sm-5 h-100" style="height: 250px !important;">
                                <div  class="h-100" style="background-image: url('{{ asset(row.Image) }}'); background-size: contain; background-position: center;background-repeat: no-repeat;"></div>

                            </div>                      
                            <div class=" col-sm-4">
                                <div class="price center-values">
                                    {{ (row.Price)|number_format(2, ',', '.') }} â‚¬
                                </div>
                                <div class="store center-values">
                                    {{ row.store }}
                                </div>                            
                            </div>
                    </div>
                </div>
            </a>
        {% endfor %}
        <div class="action-buttons">    
            {% if owner %}
            <a class="btn btn-info m-2" href="/{{room.id}}/edit">Edit</a> 
            {% endif %}

            {% if owner %}
            <a class="btn btn-warning m-2" href="{{ path('room_index') }}">Back to list</a> 
            {% else %}
            <a class="btn btn-warning m-2" href="{{ path('home_index') }}">Back to list</a> 
            {% endif %}
            
        </div>
        </div>
    
        

    </div>


    <script>
    document.getElementById('switchy').addEventListener('click', function() {
        if ( document.getElementById('switchy').checked ) {
            document.body.classList.add('active');
            var publicRoom = 0;
            
        } else {
            document.body.classList.remove('active');
            var publicRoom = 1;
        }

         $.ajax({
            url:'/room/change-room-privacity',
            type: "POST",
            dataType: "json",
            data: {
                "privacity": {
                    "room": {{ room.id }},
                    "public": publicRoom,
                }
            },
            async: true,
            success: function (data)
            {
            }
        }); 

    });
    </script>

{% endblock %}
